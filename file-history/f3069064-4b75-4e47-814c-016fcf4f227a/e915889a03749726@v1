# å¾®ä¿¡å…¬ä¼—å·é‡‡é›† Skill - å®‰è£…é…ç½®æŒ‡å—

## ğŸ“¦ å·²åˆ›å»ºçš„æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒæ¨¡å—
1. `config.py` - é…ç½®ç®¡ç†
2. `chrome_collector.py` - Chrome DevTools MCPå°è£…
3. `article_parser.py` - æ–‡ç« è§£æå™¨
4. `markdown_generator.py` - Markdownç”Ÿæˆå™¨
5. `image_downloader.py` - å›¾ç‰‡ä¸‹è½½å™¨
6. `utils.py` - å·¥å…·å‡½æ•°
7. `wechat_collector.py` - å‘½ä»¤è¡Œä¸»ç¨‹åº
8. `test_collector.py` - æµ‹è¯•è„šæœ¬

### Skillç›¸å…³
9. `skill.json` - æŠ€èƒ½é…ç½®æ–‡ä»¶
10. `skill.py` - æŠ€èƒ½ä¿¡æ¯å®šä¹‰
11. `wechat_collector_skill.py` - æŠ€èƒ½ä¸»å…¥å£
12. `SKILL_README.md` - æŠ€èƒ½è¯¦ç»†è¯´æ˜
13. `SKILL_USAGE.md` - ç”¨æˆ·ä½¿ç”¨æŒ‡å—
14. `README.md` - é¡¹ç›®è¯´æ˜
15. `requirements.txt` - Pythonä¾èµ–

## ğŸ”§ å®‰è£…æ­¥éª¤

### æ­¥éª¤1ï¼šå®‰è£…Pythonä¾èµ–

```bash
cd D:\AI\cc_pro\program\20260113_GZH-collect
pip install -r requirements.txt
```

### æ­¥éª¤2ï¼šé…ç½®MCPæœåŠ¡ï¼ˆå¦‚æœéœ€è¦ï¼‰

ç¡®ä¿Chrome DevTools MCPæœåŠ¡å·²å®‰è£…å¹¶è¿è¡Œã€‚

### æ­¥éª¤3ï¼šéªŒè¯å®‰è£…

```bash
python wechat_collector_skill.py help
```

å¦‚æœçœ‹åˆ°å¸®åŠ©ä¿¡æ¯ï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼

## ğŸ“‹ Skillé…ç½®è¯´æ˜

### skill.json
```json
{
  "name": "wechat-collector",
  "description": "å¾®ä¿¡å…¬ä¼—å·æ–‡ç« è‡ªåŠ¨åŒ–é‡‡é›†å·¥å…·",
  "version": "1.0.0",
  "skills": [
    {
      "name": "wechat_article",
      "description": "é‡‡é›†å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ...",
      "usage": "è¯·é‡‡é›†è¿™ç¯‡å¾®ä¿¡æ–‡ç« ï¼šhttps://...",
      "examples": [...]
    }
  ]
}
```

### å°†Skillæ·»åŠ åˆ°ç³»ç»Ÿ

å¦‚æœä½ çš„ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰Skillï¼Œå°†ä»¥ä¸‹é…ç½®æ·»åŠ åˆ°Skillé…ç½®æ–‡ä»¶ä¸­ï¼š

```yaml
skills:
  - name: wechat-collector
    description: å¾®ä¿¡å…¬ä¼—å·æ–‡ç« é‡‡é›†å·¥å…·
    module: wechat_collector_skill
    version: 1.0.0
    enabled: true
```

## ğŸ¯ ä½¿ç”¨æ–¹å¼

### æ–¹å¼1ï¼šç›´æ¥å¯¹è¯ï¼ˆæœ€ç®€å•ï¼‰

```
è¯·é‡‡é›†è¿™ç¯‡å¾®ä¿¡æ–‡ç« ï¼šhttps://mp.weixin.qq.com/s/5cuBvvdfHuunxzW825fNHA
```

### æ–¹å¼2ï¼šå‘½ä»¤è¡Œ

```bash
# é‡‡é›†å•ç¯‡æ–‡ç« 
python wechat_collector.py article "https://mp.weixin.qq.com/s/xxx"

# æ‰¹é‡é‡‡é›†
python wechat_collector.py batch links.txt

# å¸¦å›¾ç‰‡ä¸‹è½½
python wechat_collector.py article "https://..." --download-images
```

### æ–¹å¼3ï¼šPythonä»£ç 

```python
from wechat_collector_skill import wechat_article_collector

# é‡‡é›†å•ç¯‡æ–‡ç« 
result = wechat_article_collector(url="https://mp.weixin.qq.com/s/xxx")

# æ‰¹é‡é‡‡é›†
result = wechat_article_collector(urls=[
    "https://mp.weixin.qq.com/s/xxx1",
    "https://mp.weixin.qq.com/s/xxx2"
])
```

## ğŸ” æµ‹è¯•Skill

### æµ‹è¯•å•ç¯‡æ–‡ç« é‡‡é›†

åœ¨Claude Codeä¸­è¾“å…¥ï¼š

```
è¯·å¸®æˆ‘æµ‹è¯•é‡‡é›†åŠŸèƒ½ï¼Œé‡‡é›†è¿™ç¯‡æ–‡ç« ï¼š
https://mp.weixin.qq.com/s/5cuBvvdfHuunxzW825fNHA
```

é¢„æœŸç»“æœï¼š
1. ç³»ç»Ÿè¯†åˆ«ä¸ºå¾®ä¿¡æ–‡ç« é‡‡é›†è¯·æ±‚
2. è‡ªåŠ¨è°ƒç”¨Chrome DevTools MCPæ‰“å¼€é¡µé¢
3. æå–æ–‡ç« ä¿¡æ¯
4. ç”ŸæˆMarkdownæ–‡ä»¶
5. ä¸‹è½½å›¾ç‰‡ï¼ˆå¦‚æœå¯ç”¨ï¼‰
6. æ˜¾ç¤ºæˆåŠŸä¿¡æ¯

### éªŒè¯è¾“å‡ºæ–‡ä»¶

æ£€æŸ¥ `./wechat_articles/` ç›®å½•ï¼š

```bash
ls -R ./wechat_articles/
```

åº”è¯¥çœ‹åˆ°ï¼š
- Markdownæ–‡ä»¶
- å…ƒæ•°æ®JSONæ–‡ä»¶
- å›¾ç‰‡ç›®å½•ï¼ˆå¦‚æœä¸‹è½½äº†å›¾ç‰‡ï¼‰

## âš™ï¸ è‡ªå®šä¹‰é…ç½®

ç¼–è¾‘ `config.py`ï¼š

```python
# ä¿®æ”¹è¾“å‡ºç›®å½•
OUTPUT_DIR = Path("/your/custom/path")

# ä¿®æ”¹æ–‡ä»¶å‘½åæ ¼å¼
FILE_FORMAT = "{title}_{date}.md"  # æ ‡é¢˜_æ—¥æœŸ.md

# ä¿®æ”¹æ˜¯å¦é»˜è®¤ä¸‹è½½å›¾ç‰‡
DOWNLOAD_IMAGES = False  # æ”¹ä¸ºä¸ä¸‹è½½

# è°ƒæ•´é‡‡é›†é€Ÿåº¦
DELAY_BETWEEN_REQUESTS = 5  # å¢åŠ å»¶æ—¶åˆ°5ç§’
```

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šå¯¼å…¥æ¨¡å—å¤±è´¥

```
ModuleNotFoundError: No module named 'markdownify'
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
pip install -r requirements.txt
```

### é—®é¢˜2ï¼šChrome DevTools MCPä¸å¯ç”¨

```
Error: MCP service not available
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥MCPæœåŠ¡æ˜¯å¦è¿è¡Œ
- é‡å¯MCPæœåŠ¡
- æŸ¥çœ‹MCPé…ç½®æ–‡ä»¶

### é—®é¢˜3ï¼šæ–‡ä»¶ä¿å­˜å¤±è´¥

```
PermissionError: [Errno 13] Permission denied
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ç›®å½•æƒé™
- æ›´æ”¹OUTPUT_DIRåˆ°æœ‰æƒé™çš„ç›®å½•
- ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ

### é—®é¢˜4ï¼šå›¾ç‰‡ä¸‹è½½å¤±è´¥

```
Failed to download image: ...
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- è®¾ç½®DOWNLOAD_IMAGES = Falseè·³è¿‡å›¾ç‰‡
- å¢åŠ IMAGE_TIMEOUTé…ç½®

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æ‰¹é‡é‡‡é›†ä¼˜åŒ–

```python
# å¢åŠ å¹¶å‘æ•°
MAX_CONCURRENT_DOWNLOADS = 10  # é»˜è®¤5

# å‡å°‘å»¶æ—¶
DELAY_BETWEEN_REQUESTS = 1  # é»˜è®¤2
```

### å†…å­˜ä¼˜åŒ–

```python
# é™åˆ¶åŒæ—¶å¤„ç†çš„å›¾ç‰‡æ•°é‡
MAX_IMAGES_IN_MEMORY = 50
```

## ğŸ”„ æ›´æ–°Skill

å½“æœ‰æ–°ç‰ˆæœ¬æ—¶ï¼š

```bash
# å¤‡ä»½å½“å‰é…ç½®
cp config.py config.py.bak

# æ›´æ–°ä»£ç 
git pull

# æ¢å¤é…ç½®
cp config.py.bak config.py
```

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### å¯ç”¨æ—¥å¿—

```python
import logging

logging.basicConfig(
    level=logging.DEBUG,
    filename='collector.log',
    format='%(asctime)s - %(levelname)s - %(message)s'
)
```

### æŸ¥çœ‹æ—¥å¿—

```bash
tail -f collector.log
```

## ğŸ“ è¿›é˜¶ä½¿ç”¨

### åˆ›å»ºè‡ªå®šä¹‰é‡‡é›†è„šæœ¬

```python
from wechat_collector_skill import wechat_article_collector

# è‡ªå®šä¹‰é‡‡é›†é€»è¾‘
def collect_account_articles(account_name, article_urls):
    """é‡‡é›†æŒ‡å®šå…¬ä¼—å·çš„æ‰€æœ‰æ–‡ç« """
    results = []
    for url in article_urls:
        result = wechat_article_collector(url=url, download_images=True)
        results.append(result)
        print(f"å·²é‡‡é›†: {result.get('title', 'Unknown')}")
    return results

# ä½¿ç”¨
articles = [
    "https://mp.weixin.qq.com/s/xxx1",
    "https://mp.weixin.qq.com/s/xxx2"
]
collect_account_articles("èµ°è¿›ç”µåŠ›å¸‚åœº", articles)
```

### å®šæ—¶ä»»åŠ¡

```python
import schedule
import time

def daily_collect():
    """æ¯å¤©å®šæ—¶é‡‡é›†"""
    urls = get_new_articles()  # è·å–æ–°æ–‡ç« é“¾æ¥
    wechat_article_collector(urls=urls)

# æ¯å¤©æ—©ä¸Š8ç‚¹æ‰§è¡Œ
schedule.every().day.at("08:00").do(daily_collect)

while True:
    schedule.run_pending()
    time.sleep(60)
```

## âœ… æ£€æŸ¥æ¸…å•

å®‰è£…å®Œæˆåï¼Œæ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š

- [ ] Pythonä¾èµ–å·²å®‰è£…
- [ ] MCPæœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] é…ç½®æ–‡ä»¶å·²æ­£ç¡®è®¾ç½®
- [ ] è¾“å‡ºç›®å½•æœ‰å†™æƒé™
- [ ] ç½‘ç»œè¿æ¥æ­£å¸¸
- [ ] æµ‹è¯•é‡‡é›†æˆåŠŸ

## ğŸ‰ å‡†å¤‡å°±ç»ªï¼

ç°åœ¨ä½ å¯ä»¥å¼€å§‹ä½¿ç”¨Skilläº†ï¼š

```
è¯·é‡‡é›†è¿™ç¯‡å¾®ä¿¡æ–‡ç« ï¼š[ä½ çš„æ–‡ç« é“¾æ¥]
```

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸš€
