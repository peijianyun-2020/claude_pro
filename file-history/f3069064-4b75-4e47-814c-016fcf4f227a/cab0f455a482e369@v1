# 微信公众号文章采集工具 (WeChat Article Collector)

## 技能简介

这是一个基于Chrome DevTools MCP的微信公众号文章自动化采集工具，可以将微信文章保存为Markdown格式。

## 核心功能

### 1. 单篇文章采集
给定一个微信公众号文章链接，自动：
- 打开文章页面
- 提取标题、作者、公众号名称、发布时间
- 获取文章正文内容
- 转换为Markdown格式
- 下载文章中的图片（可选）
- 保存元数据JSON

### 2. 批量采集
从文件或列表中读取多个文章链接，批量采集所有文章。

### 3. 相关文章采集
从一篇文章自动发现"相关文章"链接，并批量采集。

### 4. 图片下载
自动下载文章中的所有图片到本地，并更新Markdown中的图片引用。

## 使用方式

### 方式1：自然语言调用（推荐）

直接在对话中使用自然语言描述：

```
请采集这篇微信文章：https://mp.weixin.qq.com/s/5cuBvvdfHuunxzW825fNHA
```

```
帮我采集这篇文章并下载图片：[文章链接]
```

```
批量采集这些文章：
- https://mp.weixin.qq.com/s/xxx1
- https://mp.weixin.qq.com/s/xxx2
- https://mp.weixin.qq.com/s/xxx3
```

### 方式2：直接提供链接

```
https://mp.weixin.qq.com/s/5cuBvvdfHuunxzW825fNHA
```

系统会自动识别微信文章链接并进行采集。

## 输出示例

采集完成后，文章会被保存在 `wechat_articles/` 目录下：

```
wechat_articles/
└── 走进电力市场/
    ├── 2026-01-04_《电力中长期市场基本规则》解读：总则和总体要求.md
    ├── 2026-01-04_《电力中长期市场基本规则》解读_metadata.json
    └── images/
        ├── 001.png
        ├── 002.png
        └── ...
```

### Markdown文件格式

```markdown
# 《电力中长期市场基本规则》解读：总则和总体要求

**元数据**

- **作者**: 荆朝霞
- **公众号**: 走进电力市场
- **发布时间**: 2026年1月4日 11:16
- **原文链接**: https://mp.weixin.qq.com/s/5cuBvvdfHuunxzW825fNHA

---

引言：2025年12月17日，新一版的《电力中长期市场基本规则》正式发布...

【解读】...
```

### 元数据JSON格式

```json
{
  "title": "《电力中长期市场基本规则》解读：总则和总体要求",
  "author": "荆朝霞",
  "account_name": "走进电力市场",
  "publish_time": "2026年1月4日 11:16",
  "url": "https://mp.weixin.qq.com/s/5cuBvvdfHuunxzW825fNHA",
  "image_count": 5,
  "collected_at": "2026-01-13T10:30:00"
}
```

## 配置选项

可以通过修改 `config.py` 自定义配置：

```python
# 存储配置
OUTPUT_DIR = "./wechat_articles"  # 输出目录
IMAGE_DIR = "images"              # 图片目录
DOWNLOAD_IMAGES = True            # 是否默认下载图片

# 文件命名格式
FILE_FORMAT = "{date}_{title}.md"  # 日期_标题.md

# 采集速度配置
DELAY_BETWEEN_REQUESTS = 2        # 请求间隔（秒）
MAX_RETRIES = 3                   # 最大重试次数
```

## 使用场景

1. **学习资料收集**：采集感兴趣的公众号文章，离线阅读
2. **内容归档**：保存重要文章，防止被删除
3. **数据分析**：批量采集文章进行文本分析
4. **知识管理**：构建个人知识库

## 技术特点

- ✅ **无需反爬处理**：使用真实浏览器访问
- ✅ **自动JavaScript渲染**：获取完整的动态内容
- ✅ **图片本地化**：自动下载并更新图片引用
- ✅ **结构化数据**：保存完整的元数据JSON
- ✅ **Markdown格式**：便于编辑和转换
- ✅ **批量处理**：支持大量文章采集

## 依赖要求

- Python 3.8+
- Chrome DevTools MCP服务
- 依赖包：requests, beautifulsoup4, markdownify, lxml, Pillow

## 注意事项

1. **仅供学习使用**：请遵守版权法律，不得用于商业用途
2. **采集速度**：单篇文章约需10-30秒
3. **网络要求**：需要能够访问微信公众号
4. **存储空间**：批量采集需要足够的磁盘空间

## 常见问题

**Q: 为什么有些文章采集失败？**
A: 可能是网络问题或文章已删除，系统会自动重试3次。

**Q: 图片下载失败怎么办？**
A: 系统会跳过无法下载的图片，并在日志中记录。可以只保留文章内容，不下载图片。

**Q: 如何批量采集公众号的所有文章？**
A: 目前需要手动提供文章链接列表。未来版本可能会支持自动获取历史文章列表。

**Q: 采集的文章保存在哪里？**
A: 默认保存在 `./wechat_articles/` 目录，按公众号名称分类。

## 版本历史

- v1.0.0 (2026-01-13)
  - 初始版本
  - 支持单篇文章采集
  - 支持批量采集
  - 支持相关文章采集
  - 支持图片下载

## 开源协议

本项目仅供学习研究使用，请勿用于商业用途。

---

**快速开始：直接给一个微信文章链接，即可开始采集！**
